# typed: false
# frozen_string_literal: true

# This file was generated by the Homebrew formula generator.
# Documentation: https://docs.brew.sh/Formula-Cookbook

class Kxconfig < Formula
  desc "Bash tools to manage multiple Kubernetes kubeconfigs organized by project"
  homepage "https://github.com/nunoarmada/kxconfig"
  url "https://github.com/nunoarmada/kxconfig/archive/refs/tags/kxconfig-v1.4.2.tar.gz"
  sha256 "c4c39fe14112a6c199ba7264c9e7023f6b8eaee8d19a62bbbea31d6a293e9914"
  license "MIT"
  head "https://github.com/nunoarmada/kxconfig.git", branch: "main"

  depends_on "bash"
  depends_on "kubectl" => :recommended

  def install
    # Install kxconfig
    bin.install "bin/kxconfig"
    # Install kxswap
    bin.install "bin/kxswap"
    # Install bash completion
    bash_completion.install "completions/kxconfig-completion.bash" => "kxconfig"
  end

  test do
    # Test kxconfig help
    assert_match "Usage:", shell_output("#{bin}/kxconfig --help", 1)
    # Test kxswap help
    assert_match "Usage:", shell_output("#{bin}/kxswap --help", 1)
  end
end
